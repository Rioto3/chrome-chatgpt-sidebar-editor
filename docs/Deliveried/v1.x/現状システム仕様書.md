# 現状システム仕様書

## 1. Chrome拡張機能（送Rail v0.2.2）
### 配布情報
- **Chrome Web Store**: https://chromewebstore.google.com/detail/送rail-営業支援ツール/ipkojdmilklipcfjmbeimgoifilhgibe
- **公開アカウント**: Rioto3のGoogleアカウント
- **審査期間**: 配布時5日程度

### 基本機能
- フォーム自動入力（DOMパターン解析方式）
- ページ遷移制御
- NGリスト機能（CSV読み込み）
- 重複検知機能
- トラッキングシステム検証機能
- 設定画面（高度設定含む）

### 技術仕様
- **開発**: Node.js + JSX（TypeScript不使用）
- **ビルド**: Webpack
- **フレームワーク**: React v18.0.0
- **Manifest**: v3対応
- **ストレージ**: ローカルストレージ（暗号化なし・問題なし）
- **対応ブラウザ**: Chrome限定

## 2. トラッキングシステム
### 技術構成
- **API**: Cloudflare Workers + Hono
- **データベース**: D1 Database（Workerのみアクセス可）
- **ドメイン**: product-pages.jp（CG様管理・お名前.com）
- **権限**: Cloudflare（Rioto3）で利用権限継承

### トラッキングロジック
- ユーザURLがサーバー経由でオリジナルURLにリダイレクト
- トラッキングURL生成は使用直前
- Hash関数（実行時ミリ秒+オリジナルURL）で重複回避
- DB構成：オリジナルURL・トラッキングID・実行時テーブル

### 統計機能
- **表示**: 前日データのみ（スプレッドシート）
- **URL**: https://docs.google.com/spreadsheets/d/1fK8Xr3FMBCzzhONovUwc7Vh-fGeF0aZwV41zv-eyvqY
- **未実装**: /insights詳細画面・日別時間別集計

## 3. データ管理
### バージョン管理
- **Git/GitHub**: プライベートリポジトリ（https://github.com/Rioto3）
- **現在**: v0.2.2（メジャー0は外販前）
- **次期**: v0.3.1（トラッキング完全導入時）

### Google Sheets連携
- **API**: Rioto3のGoogle Sheets API
- **アイテムID**: odeikmfdjjgdmggnlpadoefoaffohjcb
- **権限**: アプリ所有認証のみ
- **利点**: ユーザ自身のシート使用で安全性確保

## 4. セキュリティ・運用
### エラーハンドリング
- **拡張機能**: トラッキングURL未取得時は営業活動継続
- **API**: 現在未実装（要通知・生存確認体制）

### パフォーマンス
- **依存**: Cloudflare Workers（デファクトスタンダード）
- **エッジコンピューティング**: エンド側処理速度最適化

### 依存関係
- webpack v5.0.0
- react v18.0.0
- 脆弱性発見時：マイナーアップデート対応

### コンプライアンス
- **Chrome Web Store規約**: 遵守
- **個人情報保護**: ビジネスリスク観点から最大限尊重設計

## 5. 暫定要素
- **名称**: 「送Rail」（Rioto3命名）
- **アイコン**: 暫定デザイン
- **API仕様**: 開発中のため確定的でない
- **バックアップ**: D1 DB未対応（将来：1日分キャッシュ+メインDB送信検討）

---

- **開発・文書作成**: Rioto3 (https://coconala.com/users/4515069) 
- **完了日**: 2025年10月19日
- **HP**: https://geek.tubeclip.work/
- **Email**: rioto3@tubeclip.work